

```python
import pandas as pd
import scipy as sp
import matplotlib.pyplot as plt
import seaborn as sns
import statsmodels.api as sm
import statsmodels.formula.api as smf
from statsmodels.formula.api import ols, glm


# 데이터셋을 팬더스 데이터프레임으로 읽기 
white_wine = pd.read_csv('../data/winequality-white.csv', sep=';', header=0) ## sep: 데이터를 구분하는 기호가 뭔지, 여기서는 세미콜론으로 구분
white_wine['type'] = 'white'
white_wine.columns


```




    Index(['fixed acidity', 'volatile acidity', 'citric acid', 'residual sugar',
           'chlorides', 'free sulfur dioxide', 'total sulfur dioxide', 'density',
           'pH', 'sulphates', 'alcohol', 'quality', 'type'],
          dtype='object')




```python
red_wine = pd.read_csv('../data/winequality-red.csv', sep=';', header=0)
red_wine['type'] = 'red'
red_wine.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>fixed acidity</th>
      <th>volatile acidity</th>
      <th>citric acid</th>
      <th>residual sugar</th>
      <th>chlorides</th>
      <th>free sulfur dioxide</th>
      <th>total sulfur dioxide</th>
      <th>density</th>
      <th>pH</th>
      <th>sulphates</th>
      <th>alcohol</th>
      <th>quality</th>
      <th>type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>7.4</td>
      <td>0.70</td>
      <td>0.00</td>
      <td>1.9</td>
      <td>0.076</td>
      <td>11.0</td>
      <td>34.0</td>
      <td>0.9978</td>
      <td>3.51</td>
      <td>0.56</td>
      <td>9.4</td>
      <td>5</td>
      <td>red</td>
    </tr>
    <tr>
      <th>1</th>
      <td>7.8</td>
      <td>0.88</td>
      <td>0.00</td>
      <td>2.6</td>
      <td>0.098</td>
      <td>25.0</td>
      <td>67.0</td>
      <td>0.9968</td>
      <td>3.20</td>
      <td>0.68</td>
      <td>9.8</td>
      <td>5</td>
      <td>red</td>
    </tr>
    <tr>
      <th>2</th>
      <td>7.8</td>
      <td>0.76</td>
      <td>0.04</td>
      <td>2.3</td>
      <td>0.092</td>
      <td>15.0</td>
      <td>54.0</td>
      <td>0.9970</td>
      <td>3.26</td>
      <td>0.65</td>
      <td>9.8</td>
      <td>5</td>
      <td>red</td>
    </tr>
    <tr>
      <th>3</th>
      <td>11.2</td>
      <td>0.28</td>
      <td>0.56</td>
      <td>1.9</td>
      <td>0.075</td>
      <td>17.0</td>
      <td>60.0</td>
      <td>0.9980</td>
      <td>3.16</td>
      <td>0.58</td>
      <td>9.8</td>
      <td>6</td>
      <td>red</td>
    </tr>
    <tr>
      <th>4</th>
      <td>7.4</td>
      <td>0.70</td>
      <td>0.00</td>
      <td>1.9</td>
      <td>0.076</td>
      <td>11.0</td>
      <td>34.0</td>
      <td>0.9978</td>
      <td>3.51</td>
      <td>0.56</td>
      <td>9.4</td>
      <td>5</td>
      <td>red</td>
    </tr>
  </tbody>
</table>
</div>




```python
wine = pd.concat([white_wine, red_wine], ignore_index=True)
wine.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>fixed acidity</th>
      <th>volatile acidity</th>
      <th>citric acid</th>
      <th>residual sugar</th>
      <th>chlorides</th>
      <th>free sulfur dioxide</th>
      <th>total sulfur dioxide</th>
      <th>density</th>
      <th>pH</th>
      <th>sulphates</th>
      <th>alcohol</th>
      <th>quality</th>
      <th>type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>7.0</td>
      <td>0.27</td>
      <td>0.36</td>
      <td>20.7</td>
      <td>0.045</td>
      <td>45.0</td>
      <td>170.0</td>
      <td>1.0010</td>
      <td>3.00</td>
      <td>0.45</td>
      <td>8.8</td>
      <td>6</td>
      <td>white</td>
    </tr>
    <tr>
      <th>1</th>
      <td>6.3</td>
      <td>0.30</td>
      <td>0.34</td>
      <td>1.6</td>
      <td>0.049</td>
      <td>14.0</td>
      <td>132.0</td>
      <td>0.9940</td>
      <td>3.30</td>
      <td>0.49</td>
      <td>9.5</td>
      <td>6</td>
      <td>white</td>
    </tr>
    <tr>
      <th>2</th>
      <td>8.1</td>
      <td>0.28</td>
      <td>0.40</td>
      <td>6.9</td>
      <td>0.050</td>
      <td>30.0</td>
      <td>97.0</td>
      <td>0.9951</td>
      <td>3.26</td>
      <td>0.44</td>
      <td>10.1</td>
      <td>6</td>
      <td>white</td>
    </tr>
    <tr>
      <th>3</th>
      <td>7.2</td>
      <td>0.23</td>
      <td>0.32</td>
      <td>8.5</td>
      <td>0.058</td>
      <td>47.0</td>
      <td>186.0</td>
      <td>0.9956</td>
      <td>3.19</td>
      <td>0.40</td>
      <td>9.9</td>
      <td>6</td>
      <td>white</td>
    </tr>
    <tr>
      <th>4</th>
      <td>7.2</td>
      <td>0.23</td>
      <td>0.32</td>
      <td>8.5</td>
      <td>0.058</td>
      <td>47.0</td>
      <td>186.0</td>
      <td>0.9956</td>
      <td>3.19</td>
      <td>0.40</td>
      <td>9.9</td>
      <td>6</td>
      <td>white</td>
    </tr>
  </tbody>
</table>
</div>




```python
## 일부 열에 포함되어 있는 공백을 '_'로 replace
wine.columns = wine.columns.str.replace(' ', '_')  
```


```python
wine.head(20)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>fixed_acidity</th>
      <th>volatile_acidity</th>
      <th>citric_acid</th>
      <th>residual_sugar</th>
      <th>chlorides</th>
      <th>free_sulfur_dioxide</th>
      <th>total_sulfur_dioxide</th>
      <th>density</th>
      <th>pH</th>
      <th>sulphates</th>
      <th>alcohol</th>
      <th>quality</th>
      <th>type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>7.0</td>
      <td>0.27</td>
      <td>0.36</td>
      <td>20.70</td>
      <td>0.045</td>
      <td>45.0</td>
      <td>170.0</td>
      <td>1.0010</td>
      <td>3.00</td>
      <td>0.45</td>
      <td>8.8</td>
      <td>6</td>
      <td>white</td>
    </tr>
    <tr>
      <th>1</th>
      <td>6.3</td>
      <td>0.30</td>
      <td>0.34</td>
      <td>1.60</td>
      <td>0.049</td>
      <td>14.0</td>
      <td>132.0</td>
      <td>0.9940</td>
      <td>3.30</td>
      <td>0.49</td>
      <td>9.5</td>
      <td>6</td>
      <td>white</td>
    </tr>
    <tr>
      <th>2</th>
      <td>8.1</td>
      <td>0.28</td>
      <td>0.40</td>
      <td>6.90</td>
      <td>0.050</td>
      <td>30.0</td>
      <td>97.0</td>
      <td>0.9951</td>
      <td>3.26</td>
      <td>0.44</td>
      <td>10.1</td>
      <td>6</td>
      <td>white</td>
    </tr>
    <tr>
      <th>3</th>
      <td>7.2</td>
      <td>0.23</td>
      <td>0.32</td>
      <td>8.50</td>
      <td>0.058</td>
      <td>47.0</td>
      <td>186.0</td>
      <td>0.9956</td>
      <td>3.19</td>
      <td>0.40</td>
      <td>9.9</td>
      <td>6</td>
      <td>white</td>
    </tr>
    <tr>
      <th>4</th>
      <td>7.2</td>
      <td>0.23</td>
      <td>0.32</td>
      <td>8.50</td>
      <td>0.058</td>
      <td>47.0</td>
      <td>186.0</td>
      <td>0.9956</td>
      <td>3.19</td>
      <td>0.40</td>
      <td>9.9</td>
      <td>6</td>
      <td>white</td>
    </tr>
    <tr>
      <th>5</th>
      <td>8.1</td>
      <td>0.28</td>
      <td>0.40</td>
      <td>6.90</td>
      <td>0.050</td>
      <td>30.0</td>
      <td>97.0</td>
      <td>0.9951</td>
      <td>3.26</td>
      <td>0.44</td>
      <td>10.1</td>
      <td>6</td>
      <td>white</td>
    </tr>
    <tr>
      <th>6</th>
      <td>6.2</td>
      <td>0.32</td>
      <td>0.16</td>
      <td>7.00</td>
      <td>0.045</td>
      <td>30.0</td>
      <td>136.0</td>
      <td>0.9949</td>
      <td>3.18</td>
      <td>0.47</td>
      <td>9.6</td>
      <td>6</td>
      <td>white</td>
    </tr>
    <tr>
      <th>7</th>
      <td>7.0</td>
      <td>0.27</td>
      <td>0.36</td>
      <td>20.70</td>
      <td>0.045</td>
      <td>45.0</td>
      <td>170.0</td>
      <td>1.0010</td>
      <td>3.00</td>
      <td>0.45</td>
      <td>8.8</td>
      <td>6</td>
      <td>white</td>
    </tr>
    <tr>
      <th>8</th>
      <td>6.3</td>
      <td>0.30</td>
      <td>0.34</td>
      <td>1.60</td>
      <td>0.049</td>
      <td>14.0</td>
      <td>132.0</td>
      <td>0.9940</td>
      <td>3.30</td>
      <td>0.49</td>
      <td>9.5</td>
      <td>6</td>
      <td>white</td>
    </tr>
    <tr>
      <th>9</th>
      <td>8.1</td>
      <td>0.22</td>
      <td>0.43</td>
      <td>1.50</td>
      <td>0.044</td>
      <td>28.0</td>
      <td>129.0</td>
      <td>0.9938</td>
      <td>3.22</td>
      <td>0.45</td>
      <td>11.0</td>
      <td>6</td>
      <td>white</td>
    </tr>
    <tr>
      <th>10</th>
      <td>8.1</td>
      <td>0.27</td>
      <td>0.41</td>
      <td>1.45</td>
      <td>0.033</td>
      <td>11.0</td>
      <td>63.0</td>
      <td>0.9908</td>
      <td>2.99</td>
      <td>0.56</td>
      <td>12.0</td>
      <td>5</td>
      <td>white</td>
    </tr>
    <tr>
      <th>11</th>
      <td>8.6</td>
      <td>0.23</td>
      <td>0.40</td>
      <td>4.20</td>
      <td>0.035</td>
      <td>17.0</td>
      <td>109.0</td>
      <td>0.9947</td>
      <td>3.14</td>
      <td>0.53</td>
      <td>9.7</td>
      <td>5</td>
      <td>white</td>
    </tr>
    <tr>
      <th>12</th>
      <td>7.9</td>
      <td>0.18</td>
      <td>0.37</td>
      <td>1.20</td>
      <td>0.040</td>
      <td>16.0</td>
      <td>75.0</td>
      <td>0.9920</td>
      <td>3.18</td>
      <td>0.63</td>
      <td>10.8</td>
      <td>5</td>
      <td>white</td>
    </tr>
    <tr>
      <th>13</th>
      <td>6.6</td>
      <td>0.16</td>
      <td>0.40</td>
      <td>1.50</td>
      <td>0.044</td>
      <td>48.0</td>
      <td>143.0</td>
      <td>0.9912</td>
      <td>3.54</td>
      <td>0.52</td>
      <td>12.4</td>
      <td>7</td>
      <td>white</td>
    </tr>
    <tr>
      <th>14</th>
      <td>8.3</td>
      <td>0.42</td>
      <td>0.62</td>
      <td>19.25</td>
      <td>0.040</td>
      <td>41.0</td>
      <td>172.0</td>
      <td>1.0002</td>
      <td>2.98</td>
      <td>0.67</td>
      <td>9.7</td>
      <td>5</td>
      <td>white</td>
    </tr>
    <tr>
      <th>15</th>
      <td>6.6</td>
      <td>0.17</td>
      <td>0.38</td>
      <td>1.50</td>
      <td>0.032</td>
      <td>28.0</td>
      <td>112.0</td>
      <td>0.9914</td>
      <td>3.25</td>
      <td>0.55</td>
      <td>11.4</td>
      <td>7</td>
      <td>white</td>
    </tr>
    <tr>
      <th>16</th>
      <td>6.3</td>
      <td>0.48</td>
      <td>0.04</td>
      <td>1.10</td>
      <td>0.046</td>
      <td>30.0</td>
      <td>99.0</td>
      <td>0.9928</td>
      <td>3.24</td>
      <td>0.36</td>
      <td>9.6</td>
      <td>6</td>
      <td>white</td>
    </tr>
    <tr>
      <th>17</th>
      <td>6.2</td>
      <td>0.66</td>
      <td>0.48</td>
      <td>1.20</td>
      <td>0.029</td>
      <td>29.0</td>
      <td>75.0</td>
      <td>0.9892</td>
      <td>3.33</td>
      <td>0.39</td>
      <td>12.8</td>
      <td>8</td>
      <td>white</td>
    </tr>
    <tr>
      <th>18</th>
      <td>7.4</td>
      <td>0.34</td>
      <td>0.42</td>
      <td>1.10</td>
      <td>0.033</td>
      <td>17.0</td>
      <td>171.0</td>
      <td>0.9917</td>
      <td>3.12</td>
      <td>0.53</td>
      <td>11.3</td>
      <td>6</td>
      <td>white</td>
    </tr>
    <tr>
      <th>19</th>
      <td>6.5</td>
      <td>0.31</td>
      <td>0.14</td>
      <td>7.50</td>
      <td>0.044</td>
      <td>34.0</td>
      <td>133.0</td>
      <td>0.9955</td>
      <td>3.22</td>
      <td>0.50</td>
      <td>9.5</td>
      <td>5</td>
      <td>white</td>
    </tr>
  </tbody>
</table>
</div>




```python
wine.describe()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>fixed_acidity</th>
      <th>volatile_acidity</th>
      <th>citric_acid</th>
      <th>residual_sugar</th>
      <th>chlorides</th>
      <th>free_sulfur_dioxide</th>
      <th>total_sulfur_dioxide</th>
      <th>density</th>
      <th>pH</th>
      <th>sulphates</th>
      <th>alcohol</th>
      <th>quality</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>6497.000000</td>
      <td>6497.000000</td>
      <td>6497.000000</td>
      <td>6497.000000</td>
      <td>6497.000000</td>
      <td>6497.000000</td>
      <td>6497.000000</td>
      <td>6497.000000</td>
      <td>6497.000000</td>
      <td>6497.000000</td>
      <td>6497.000000</td>
      <td>6497.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>7.215307</td>
      <td>0.339666</td>
      <td>0.318633</td>
      <td>5.443235</td>
      <td>0.056034</td>
      <td>30.525319</td>
      <td>115.744574</td>
      <td>0.994697</td>
      <td>3.218501</td>
      <td>0.531268</td>
      <td>10.491801</td>
      <td>5.818378</td>
    </tr>
    <tr>
      <th>std</th>
      <td>1.296434</td>
      <td>0.164636</td>
      <td>0.145318</td>
      <td>4.757804</td>
      <td>0.035034</td>
      <td>17.749400</td>
      <td>56.521855</td>
      <td>0.002999</td>
      <td>0.160787</td>
      <td>0.148806</td>
      <td>1.192712</td>
      <td>0.873255</td>
    </tr>
    <tr>
      <th>min</th>
      <td>3.800000</td>
      <td>0.080000</td>
      <td>0.000000</td>
      <td>0.600000</td>
      <td>0.009000</td>
      <td>1.000000</td>
      <td>6.000000</td>
      <td>0.987110</td>
      <td>2.720000</td>
      <td>0.220000</td>
      <td>8.000000</td>
      <td>3.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>6.400000</td>
      <td>0.230000</td>
      <td>0.250000</td>
      <td>1.800000</td>
      <td>0.038000</td>
      <td>17.000000</td>
      <td>77.000000</td>
      <td>0.992340</td>
      <td>3.110000</td>
      <td>0.430000</td>
      <td>9.500000</td>
      <td>5.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>7.000000</td>
      <td>0.290000</td>
      <td>0.310000</td>
      <td>3.000000</td>
      <td>0.047000</td>
      <td>29.000000</td>
      <td>118.000000</td>
      <td>0.994890</td>
      <td>3.210000</td>
      <td>0.510000</td>
      <td>10.300000</td>
      <td>6.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>7.700000</td>
      <td>0.400000</td>
      <td>0.390000</td>
      <td>8.100000</td>
      <td>0.065000</td>
      <td>41.000000</td>
      <td>156.000000</td>
      <td>0.996990</td>
      <td>3.320000</td>
      <td>0.600000</td>
      <td>11.300000</td>
      <td>6.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>15.900000</td>
      <td>1.580000</td>
      <td>1.660000</td>
      <td>65.800000</td>
      <td>0.611000</td>
      <td>289.000000</td>
      <td>440.000000</td>
      <td>1.038980</td>
      <td>4.010000</td>
      <td>2.000000</td>
      <td>14.900000</td>
      <td>9.000000</td>
    </tr>
  </tbody>
</table>
</div>




```python
sorted(wine.quality.unique())
```




    [3, 4, 5, 6, 7, 8, 9]




```python
wine.quality.value_counts()
```




    6    2836
    5    2138
    7    1079
    4     216
    8     193
    3      30
    9       5
    Name: quality, dtype: int64




```python
## 그룹화, 히스토그램, t검정
red_wine = wine.ix[wine['type']=='red', 'quality']
white_wine = wine.ix[wine['type']=='white', 'quality']
plt.figure(figsize=[10,10])
sns.set_style("dark")
sns.distplot(red_wine, \
            norm_hist=True, kde=False, color="red", label="Red Wine")
sns.distplot(white_wine, \
            norm_hist=True, kde=False, color="white", label="White Wine")
sns.utils.axlabel("Quality Score", "Density")

plt.title("Distribution of Quality by Wine Type")
plt.legend()
plt.show()
```

    C:\Users\SunrokKwon\Anaconda3\lib\site-packages\ipykernel_launcher.py:2: DeprecationWarning: 
    .ix is deprecated. Please use
    .loc for label based indexing or
    .iloc for positional indexing
    
    See the documentation here:
    http://pandas.pydata.org/pandas-docs/stable/indexing.html#ix-indexer-is-deprecated
      
    C:\Users\SunrokKwon\Anaconda3\lib\site-packages\ipykernel_launcher.py:3: DeprecationWarning: 
    .ix is deprecated. Please use
    .loc for label based indexing or
    .iloc for positional indexing
    
    See the documentation here:
    http://pandas.pydata.org/pandas-docs/stable/indexing.html#ix-indexer-is-deprecated
      This is separate from the ipykernel package so we can avoid doing imports until
    C:\Users\SunrokKwon\Anaconda3\lib\site-packages\scipy\stats\stats.py:1713: FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.
      return np.add.reduce(sorted[indexer] * weights, axis=axis) / sumval
    


![png](output_8_1.png)



```python
## 와인 종류(red or white)에 따른 품질의 차이 검정

wine.groupby(['type'])[['quality']].agg(['std','mean'])
tstat, pvalue, df = sm.stats.ttest_ind(red_wine, white_wine)
print('tstat: %.3f pvalue: %.4f' % (tstat, pvalue))
```

    tstat: -9.686 pvalue: 0.0000
    


```python
## 모든 변수 쌍 사이의 상관계수 구하기

wine.corr()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>fixed_acidity</th>
      <th>volatile_acidity</th>
      <th>citric_acid</th>
      <th>residual_sugar</th>
      <th>chlorides</th>
      <th>free_sulfur_dioxide</th>
      <th>total_sulfur_dioxide</th>
      <th>density</th>
      <th>pH</th>
      <th>sulphates</th>
      <th>alcohol</th>
      <th>quality</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>fixed_acidity</th>
      <td>1.000000</td>
      <td>0.219008</td>
      <td>0.324436</td>
      <td>-0.111981</td>
      <td>0.298195</td>
      <td>-0.282735</td>
      <td>-0.329054</td>
      <td>0.458910</td>
      <td>-0.252700</td>
      <td>0.299568</td>
      <td>-0.095452</td>
      <td>-0.076743</td>
    </tr>
    <tr>
      <th>volatile_acidity</th>
      <td>0.219008</td>
      <td>1.000000</td>
      <td>-0.377981</td>
      <td>-0.196011</td>
      <td>0.377124</td>
      <td>-0.352557</td>
      <td>-0.414476</td>
      <td>0.271296</td>
      <td>0.261454</td>
      <td>0.225984</td>
      <td>-0.037640</td>
      <td>-0.265699</td>
    </tr>
    <tr>
      <th>citric_acid</th>
      <td>0.324436</td>
      <td>-0.377981</td>
      <td>1.000000</td>
      <td>0.142451</td>
      <td>0.038998</td>
      <td>0.133126</td>
      <td>0.195242</td>
      <td>0.096154</td>
      <td>-0.329808</td>
      <td>0.056197</td>
      <td>-0.010493</td>
      <td>0.085532</td>
    </tr>
    <tr>
      <th>residual_sugar</th>
      <td>-0.111981</td>
      <td>-0.196011</td>
      <td>0.142451</td>
      <td>1.000000</td>
      <td>-0.128940</td>
      <td>0.402871</td>
      <td>0.495482</td>
      <td>0.552517</td>
      <td>-0.267320</td>
      <td>-0.185927</td>
      <td>-0.359415</td>
      <td>-0.036980</td>
    </tr>
    <tr>
      <th>chlorides</th>
      <td>0.298195</td>
      <td>0.377124</td>
      <td>0.038998</td>
      <td>-0.128940</td>
      <td>1.000000</td>
      <td>-0.195045</td>
      <td>-0.279630</td>
      <td>0.362615</td>
      <td>0.044708</td>
      <td>0.395593</td>
      <td>-0.256916</td>
      <td>-0.200666</td>
    </tr>
    <tr>
      <th>free_sulfur_dioxide</th>
      <td>-0.282735</td>
      <td>-0.352557</td>
      <td>0.133126</td>
      <td>0.402871</td>
      <td>-0.195045</td>
      <td>1.000000</td>
      <td>0.720934</td>
      <td>0.025717</td>
      <td>-0.145854</td>
      <td>-0.188457</td>
      <td>-0.179838</td>
      <td>0.055463</td>
    </tr>
    <tr>
      <th>total_sulfur_dioxide</th>
      <td>-0.329054</td>
      <td>-0.414476</td>
      <td>0.195242</td>
      <td>0.495482</td>
      <td>-0.279630</td>
      <td>0.720934</td>
      <td>1.000000</td>
      <td>0.032395</td>
      <td>-0.238413</td>
      <td>-0.275727</td>
      <td>-0.265740</td>
      <td>-0.041385</td>
    </tr>
    <tr>
      <th>density</th>
      <td>0.458910</td>
      <td>0.271296</td>
      <td>0.096154</td>
      <td>0.552517</td>
      <td>0.362615</td>
      <td>0.025717</td>
      <td>0.032395</td>
      <td>1.000000</td>
      <td>0.011686</td>
      <td>0.259478</td>
      <td>-0.686745</td>
      <td>-0.305858</td>
    </tr>
    <tr>
      <th>pH</th>
      <td>-0.252700</td>
      <td>0.261454</td>
      <td>-0.329808</td>
      <td>-0.267320</td>
      <td>0.044708</td>
      <td>-0.145854</td>
      <td>-0.238413</td>
      <td>0.011686</td>
      <td>1.000000</td>
      <td>0.192123</td>
      <td>0.121248</td>
      <td>0.019506</td>
    </tr>
    <tr>
      <th>sulphates</th>
      <td>0.299568</td>
      <td>0.225984</td>
      <td>0.056197</td>
      <td>-0.185927</td>
      <td>0.395593</td>
      <td>-0.188457</td>
      <td>-0.275727</td>
      <td>0.259478</td>
      <td>0.192123</td>
      <td>1.000000</td>
      <td>-0.003029</td>
      <td>0.038485</td>
    </tr>
    <tr>
      <th>alcohol</th>
      <td>-0.095452</td>
      <td>-0.037640</td>
      <td>-0.010493</td>
      <td>-0.359415</td>
      <td>-0.256916</td>
      <td>-0.179838</td>
      <td>-0.265740</td>
      <td>-0.686745</td>
      <td>0.121248</td>
      <td>-0.003029</td>
      <td>1.000000</td>
      <td>0.444319</td>
    </tr>
    <tr>
      <th>quality</th>
      <td>-0.076743</td>
      <td>-0.265699</td>
      <td>0.085532</td>
      <td>-0.036980</td>
      <td>-0.200666</td>
      <td>0.055463</td>
      <td>-0.041385</td>
      <td>-0.305858</td>
      <td>0.019506</td>
      <td>0.038485</td>
      <td>0.444319</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div>




```python
def take_sample(data_frame, replace=False, n=200):    ## take_sample 이라는 함수 정의하기: 샘플 갯수 n은 200
    return data_frame.loc[sp.random.choice(data_frame.index, replace=replace, size=n)] ##scipy의 랜던선택 기능으로 뽑기

reds_sample = take_sample(wine.loc[wine['type']=='red', :])  ##take_sample 함수를 이용하여 레드와인에서 샘플 뽑기
white_sample = take_sample(wine.loc[wine['type']=='white', :]) ## 같은 방법으로 화이트와인 샘플 추출 

wine_sample = pd.concat([reds_sample, white_sample])  ## 뽑은 데이터를 
wine['in_sample'] = sp.where(wine.index.isin(wine_sample.index), 1., 0.)

pd.crosstab(wine.in_sample, wine.type, margins=True)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>type</th>
      <th>red</th>
      <th>white</th>
      <th>All</th>
    </tr>
    <tr>
      <th>in_sample</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0.0</th>
      <td>1399</td>
      <td>4698</td>
      <td>6097</td>
    </tr>
    <tr>
      <th>1.0</th>
      <td>200</td>
      <td>200</td>
      <td>400</td>
    </tr>
    <tr>
      <th>All</th>
      <td>1599</td>
      <td>4898</td>
      <td>6497</td>
    </tr>
  </tbody>
</table>
</div>




```python

```
